/*!
 * @pluginjs/animate-text v0.8.3 (https://pluginjs.com)
 * Copyright 2020 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var e=t(require("@pluginjs/component")),i=require("@pluginjs/classes"),s=require("@pluginjs/dom"),n=require("@pluginjs/events"),a=require("@pluginjs/is"),o=require("@pluginjs/decorator"),r=t(require("animejs")),h=require("@pluginjs/styled"),l={READY:"ready",ENABLE:"enable",DISABLE:"disable",DESTROY:"destroy"},p={NAMESPACE:"pj-".concat("animateText"),SWITCH:"{namespace}-switch",WORD:"{namespace}-word",CHAR:"{namespace}-char",SPACE:"{namespace}-space",CURSOR:"{namespace}-cursor"};class d{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=s.text(this.element),s.text("",this.element),this.instance.splitWord(this.text)}setupAnime(){this.options.loop?r.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({opacity:[0,1],endDelay:700}).add({opacity:[1,0]}):r({targets:this.element,opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}}class u{constructor(){return window.SyncAnimationGroup||(this.animationGroups=[],document.addEventListener("visibilitychange",()=>{document.hidden?this.animationGroups.forEach(t=>{var{group:e,onBlur:i}=t;return e.forEach(i)}):this.animationGroups.forEach(t=>{var{group:e,onFocus:i}=t;return e.forEach(i)})},!1),window.SyncAnimationGroup=this),window.SyncAnimationGroup}createAnimationGroup(t,e){var i={group:[],onBlur:t,onFocus:e};return this.animationGroups.push(i),{push(){i.group.push(...arguments)}}}static of(){return new u}}class c{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize()}initialize(){this.animationGroup=u.of().createAnimationGroup(t=>t.pause(),t=>t.play()),this.joinSyncAnimationGroup=t=>this.animationGroup.push(t),this.elementHeight=h.getHeight(this.element),this.instance.switchWord(),this.childrens=Array.from(this.element.children),this.widthList=this.getWidthList(this.element),this.setPosition(),h.setStyle("height",this.elementHeight,this.element),this.DOWNTOMID=[this.elementHeight,0],this.MIDTOUP=[0,-1*this.elementHeight],this.totalDuration=this.options.duration*this.childrens.length}getContainerOptions(){return{targets:this.element,duration:this.totalDuration,easing:"easeOutCirc",begin:this.joinSyncAnimationGroup,loop:this.options.loop,width:this.widthList}}getWidthList(t){var e=Array.from(t.children).map(t=>t.offsetWidth),i=[];return i.push({value:e[e.length-1],duration:0}),e.forEach(t=>{i.push({value:t,duration:this.options.duration})}),i}setPosition(){this.childrens.forEach(t=>{h.setStyle({opacity:0,position:"absolute"},t)})}}class m{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize()}initialize(){this.text=s.text(this.element),s.text("",this.element),this.instance.splitWord(this.text,!0),this.chars=s.queryAll(".".concat(this.instance.classes.CHAR),this.element)}}var g,y={fade:d,fadeDown:class extends d{setupAnime(){this.options.loop?r.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({translateY:[-20,0],opacity:[0,1],endDelay:700}).add({translateY:[0,20],opacity:[1,0]}):r({targets:this.element,translateY:[-20,0],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}},fadeUp:class extends d{setupAnime(){this.options.loop?r.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({translateY:[20,0],opacity:[0,1],endDelay:700}).add({translateY:[0,-20],opacity:[1,0]}):r({targets:this.element,translateY:[20,0],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}},fadeLeft:class extends d{setupAnime(){this.options.loop?r.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({translateX:[20,0],opacity:[0,1],endDelay:700}).add({translateX:[0,-20],opacity:[1,0]}):r({targets:this.element,translateX:[20,0],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}},fadeRight:class extends d{setupAnime(){this.options.loop?r.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({translateX:[-20,0],opacity:[0,1],endDelay:700}).add({translateX:[0,20],opacity:[1,0]}):r({targets:this.element,translateX:[-20,0],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}},zoom:class{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=s.text(this.element),s.text("",this.element),this.instance.splitWord(this.text)}setupAnime(){this.options.loop?r.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"easeInOutQuart"}).add({scale:[0,1],opacity:[0,1],endDelay:700}).add({scale:[1,1.3],opacity:[1,0]}):r({targets:this.element,scale:[0,1],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"easeInOutQuart"})}},bounce:class{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=s.text(this.element),s.text("",this.element),this.instance.splitWord(this.text)}setupAnime(){var t={targets:this.element,scale:[.5,1.2,.8,1.2,1],endDelay:700+this.options.duration};r.timeline({duration:this.options.duration,easing:"easeInOutSine",loop:this.options.loop}).add(t)}},swing:class{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=s.text(this.element),s.text("",this.element),this.instance.splitWord(this.text),h.setStyle("transform-origin","top center",this.element)}setupAnime(){var t={targets:this.element,rotateZ:[-5,5,-10,10,0],endDelay:700+this.options.duration};r.timeline({duration:this.options.duration,easing:"easeInOutSine",loop:this.options.loop}).add(t)}},typewrite:class{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=s.text(this.element),this.build(),this.textArr=this.text.split(""),this.chunk=Array(this.textArr.length+1).fill(1).map((t,e)=>e),this.chunkReverse=this.chunk.slice().reverse(),this.initTextOptions()}initTextOptions(){this.alt=a.isArray(this.options.alt)?this.options.alt:Array.of(this.options.alt),this.totalText=Array.of({textArr:this.textArr,chunk:this.chunk,chunkReverse:this.chunkReverse}),this.alt.forEach(t=>{var e=t.split(""),i=Array(e.length+1).fill(1).map((t,e)=>e),s=i.slice().reverse();this.totalText.push({textArr:e,chunk:i,chunkReverse:s})})}build(){s.text("",this.element),this.content=document.createElement("span"),i.addClass(this.instance.classes.WORD,this.content),s.text(this.text,this.content),s.append(this.content,this.element),this.cursor=document.createElement("span"),i.addClass(this.instance.classes.CURSOR,this.cursor),s.text("|",this.cursor),s.append(this.cursor,this.element)}setupAnime(){var t=0,e={textLen:0},i={textLen:0},n={targets:e,textLen:this.totalText[t].chunk.length-1,round:1,duration:this.options.duration,easing:"easeInOutSine",update:()=>{var i=this.totalText[t].textArr.slice(0,this.totalText[t].chunk[e.textLen]).join("");s.text("".concat(i),this.content)},complete:()=>{e.textLen=0,t!==this.totalText.length-1||this.options.loop||this.anime.pause()},endDelay:2e3},a={targets:i,textLen:this.totalText[t].chunkReverse.length-1,round:1,duration:this.options.duration/3,easing:"linear",update:()=>{var e=this.totalText[t].textArr.slice(0,this.totalText[t].chunkReverse[i.textLen]).join("");s.text("".concat(e),this.content)},complete:()=>{i.textLen=0,this.anime.pause(),this.options.loop&&t===this.totalText.length-1&&(t=-1),t<this.totalText.length-1&&(t++,h())}},o=this;function h(){n.textLen=o.totalText[t].chunk.length-1,a.textLen=o.totalText[t].chunkReverse.length-1,o.anime=r.timeline({}).add(n).add(a)}h()}},switchSlider:class extends c{constructor(t){super(t),this.setupAnime()}getAnimeDefaultOptions(t){return{targets:t,easing:"easeInSine",duration:this.options.duration,begin:this.joinSyncAnimationGroup,opacity:[{value:[0,1],duration:.2*this.options.duration},{value:1,duration:.2*this.options.duration},{value:[1,0],duration:.6*this.options.duration}],translateY:[{value:this.DOWNTOMID},{value:0},{value:this.MIDTOUP}]}}setupAnime(){(r(this.getContainerOptions()),this.options.loop)?r(Object.assign({},this.getAnimeDefaultOptions(this.childrens),{loop:!0,delay:(t,e)=>e*this.options.duration})):this.childrens.map((t,e)=>e===this.childrens.length-1?Object.assign(this.getAnimeDefaultOptions(t),{opacity:[[0,1],1],translateY:[{value:this.DOWNTOMID},{value:0}],loop:!1}):Object.assign(this.getAnimeDefaultOptions(t),{loop:!1})).forEach((t,e)=>{setTimeout(()=>r(t),e*this.options.duration)})}},switchFade:class extends c{constructor(t){super(t),this.setupAnime()}getAnimeDefaultOptions(t){return{targets:t,easing:"easeInOutQuart",duration:this.options.duration,begin:this.joinSyncAnimationGroup,opacity:[[0,1],1,[1,0]]}}setupAnime(){(r(this.getContainerOptions()),this.options.loop)?r(Object.assign({},this.getAnimeDefaultOptions(this.childrens),{loop:!0,delay:(t,e)=>e*this.options.duration})):this.childrens.map((t,e)=>e===this.childrens.length-1?Object.assign(this.getAnimeDefaultOptions(t),{opacity:[[0,1],1],loop:!1}):Object.assign(this.getAnimeDefaultOptions(t),{loop:!1})).forEach((t,e)=>{setTimeout(()=>r(t),e*this.options.duration)})}},switchPush:class extends c{constructor(t){super(t),this.setupAnime()}getAnimeDefaultOptions(t){return{targets:t,easing:"easeInBack",duration:this.options.duration,begin:this.joinSyncAnimationGroup,opacity:[{value:[0,1],duration:.2*this.options.duration},{value:1,duration:.4*this.options.duration},{value:[1,0],duration:.4*this.options.duration}],translateY:[{value:this.DOWNTOMID},{value:0},{value:this.MIDTOUP}]}}setupAnime(){(r(this.getContainerOptions()),this.options.loop)?r(Object.assign({},this.getAnimeDefaultOptions(this.childrens),{loop:!0,delay:(t,e)=>e*this.options.duration})):this.childrens.map((t,e)=>e===this.childrens.length-1?Object.assign(this.getAnimeDefaultOptions(t),{opacity:[{value:[0,1],duration:.2*this.options.duration},{value:1,duration:.8*this.options.duration}],translateY:[{value:this.DOWNTOMID},{value:0}],loop:!1}):Object.assign(this.getAnimeDefaultOptions(t),{loop:!1})).forEach((t,e)=>{setTimeout(()=>r(t),e*this.options.duration)})}},charFade:class extends m{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?r.timeline({targets:this.chars,loop:!0,duration:this.options.duration,easing:"easeInOutQuad",delay:(t,e)=>60*e}).add({opacity:[0,1],endDelay:700}).add({opacity:[1,0]}):r({targets:this.chars,opacity:[0,1],easing:"easeInOutQuad",duration:this.options.duration,loop:!1,delay:(t,e)=>60*e})}},charFadeLeft:class extends m{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?r.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,e)=>60*e}).add({translateX:[20,0],easing:"easeOutQuart",opacity:[0,1],endDelay:700}).add({translateX:[0,-20],easing:"easeInQuart",opacity:[1,0]}):r({targets:this.chars,translateX:[20,0],opacity:[0,1],easing:"easeOutQuart",duration:this.options.duration,loop:!1,delay:(t,e)=>60*e})}},charFadeUp:class extends m{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?r.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,e)=>60*e}).add({translateY:["0.7em",0],easing:"easeOutExpo",opacity:[0,1],endDelay:700}).add({translateY:[0,"-0.4em"],easing:"easeInExpo",opacity:[1,0]}):r({targets:this.chars,translateY:["0.7em",0],opacity:[0,1],easing:"easeOutExpo",duration:this.options.duration,loop:!1,delay:(t,e)=>60*e})}},charFadeDown:class extends m{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?r.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,e)=>60*e}).add({translateY:["-0.7em",0],easing:"easeOutExpo",opacity:[0,1],endDelay:700}).add({translateY:[0,"0.4em"],easing:"easeInExpo",opacity:[1,0]}):r({targets:this.chars,translateY:["-0.7em",0],opacity:[0,1],easing:"easeOutExpo",duration:this.options.duration,loop:!1,delay:(t,e)=>60*e})}},charPush:class extends m{constructor(t){super(t),h.setStyle({overflow:"hidden","vertical-align":"bottom"},this.element),this.setupAnime()}setupAnime(){this.options.loop?r.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,e)=>60*e}).add({translateY:["0.7em",0],opacity:[0,1],endDelay:700}).add({translateY:[0,"-0.5em"],easing:"easeInElastic",opacity:[1,0]}):r({targets:this.chars,translateY:["0.7em",0],opacity:[0,1],duration:this.options.duration,loop:!1,delay:(t,e)=>60*e})}},charRotate:class extends m{constructor(t){super(t),h.setStyle({overflow:"hidden","vertical-align":"bottom"},this.element),this.chars.forEach(t=>{h.setStyle("transform-origin","0 100%",t)}),this.setupAnime()}setupAnime(){this.options.loop?r.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,e)=>60*e}).add({rotateZ:[180,0],opacity:[0,1],easing:"easeOutExpo",endDelay:700}).add({rotateZ:[0,-45],opacity:[1,0],easing:"easeInExpo"}):r({targets:this.chars,rotateZ:[180,0],opacity:[0,1],easing:"easeOutExpo",duration:this.options.duration,loop:!1,delay:(t,e)=>60*e})}},charBounceOut:class extends m{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?r.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,e)=>60*e}).add({scale:[0,1],easing:"easeOutElastic",endDelay:700}).add({scale:[1,1.5],easing:"easeInElastic",opacity:[1,0]}):r({targets:this.chars,scale:[0,1],easing:"easeOutElastic",duration:this.options.duration,loop:!1,delay:(t,e)=>60*e})}},charFlip:class extends m{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?r.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,e)=>60*e}).add({rotateY:[-90,0],opacity:[0,1],endDelay:700}).add({rotateY:[0,90],opacity:[1,0]}):r({targets:this.chars,rotateY:[-90,0],opacity:[0,1],duration:this.options.duration,loop:!1,delay:(t,e)=>60*e})}},charZoomIn:class extends m{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?r.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,e)=>60*e}).add({scale:[2,1],opacity:[0,1],easing:"easeOutExpo",endDelay:700}).add({scale:[1,0],easing:"easeInExpo",opacity:[1,0]}):r({targets:this.chars,scale:[2,1],opacity:[0,1],easing:"easeOutExpo",duration:this.options.duration,loop:!1,delay:(t,e)=>60*e})}}},x={},A=o.styleable(p)(g=o.eventable(l)(g=o.stateable()(g=o.optionable({mode:"fadeDown",loop:!0,duration:1e3,alt:[]},!0)(g=o.register("animateText",{methods:["enable","disable","destroy"],dependencies:["anime"]})(g=class extends e{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.setupOptions(e),this.loop=this.options.loop,this.mode=this.options.mode,this.delay=this.options.delay,this.duration=this.options.duration,this.setupClasses(),i.addClass(this.classes.NAMESPACE,this.element),this.setupStates(),this.initialize()}initialize(){void 0!==x[this.mode]&&(this.effect=new x[this.mode](this)),this.bind(),this.enter("initialized"),this.trigger(l.READY)}splitWord(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.split(" ").forEach((t,n,a)=>{if(e){t.split("").forEach(t=>{var e=document.createElement("span");s.text(t,e),i.addClass(this.classes.CHAR,e),s.append(e,this.element)})}else{var o=document.createElement("span");s.text(t,o),i.addClass(this.classes.WORD,o),s.append(o,this.element)}if(n<a.length-1){var r=document.createElement("span");i.addClass(this.classes.SPACE,r),s.text(" ",r),s.append(r,this.element)}})}switchWord(){i.addClass(this.classes.SWITCH,this.element);var t=document.createElement("span");i.addClass(this.classes.WORD,t),s.text(s.text(this.element),t),s.text("",this.element),s.append(t,this.element),this.alt=a.isArray(this.options.alt)?this.options.alt:[].push(this.options.alt),this.alt.forEach(t=>{var e=document.createElement("span");i.addClass(this.classes.WORD,e),s.text(t,e),s.append(e,this.element)})}bind(){n.bindEvent(this.eventName("click touch"),()=>!1,this.element)}unbind(){n.removeEvent(this.eventName(),this.element)}enable(){this.is("disabled")&&this.leave("disabled"),this.trigger(l.ENABLE)}disable(){this.is("disabled")||this.enter("disabled"),this.trigger(l.DISABLE)}destroy(){this.is("initialized")&&(this.unbind(),this.leave("initialized")),this.trigger(l.DESTROY),super.destroy()}static registerEffect(t,e){x[t]=e}})||g)||g)||g)||g)||g;Object.keys(y).forEach(t=>{A.registerEffect(t,y[t])}),module.exports=A;
