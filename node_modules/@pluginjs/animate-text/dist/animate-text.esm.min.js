/*!
 * @pluginjs/animate-text v0.8.3 (https://pluginjs.com)
 * Copyright 2020 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
import t from"@pluginjs/component";import{addClass as i}from"@pluginjs/classes";import{text as e,append as s,queryAll as n}from"@pluginjs/dom";import{bindEvent as a,removeEvent as o}from"@pluginjs/events";import{isArray as r}from"@pluginjs/is";import{styleable as h,eventable as l,stateable as p,optionable as u,register as c}from"@pluginjs/decorator";import d from"animejs";import{setStyle as m,getHeight as g}from"@pluginjs/styled";var y={READY:"ready",ENABLE:"enable",DISABLE:"disable",DESTROY:"destroy"},A={NAMESPACE:"pj-".concat("animateText"),SWITCH:"{namespace}-switch",WORD:"{namespace}-word",CHAR:"{namespace}-char",SPACE:"{namespace}-space",CURSOR:"{namespace}-cursor"};class x{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=e(this.element),e("",this.element),this.instance.splitWord(this.text)}setupAnime(){this.options.loop?d.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({opacity:[0,1],endDelay:700}).add({opacity:[1,0]}):d({targets:this.element,opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}}class O{constructor(){return window.SyncAnimationGroup||(this.animationGroups=[],document.addEventListener("visibilitychange",()=>{document.hidden?this.animationGroups.forEach(t=>{var{group:i,onBlur:e}=t;return i.forEach(e)}):this.animationGroups.forEach(t=>{var{group:i,onFocus:e}=t;return i.forEach(e)})},!1),window.SyncAnimationGroup=this),window.SyncAnimationGroup}createAnimationGroup(t,i){var e={group:[],onBlur:t,onFocus:i};return this.animationGroups.push(e),{push(){e.group.push(...arguments)}}}static of(){return new O}}class f{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize()}initialize(){this.animationGroup=O.of().createAnimationGroup(t=>t.pause(),t=>t.play()),this.joinSyncAnimationGroup=t=>this.animationGroup.push(t),this.elementHeight=g(this.element),this.instance.switchWord(),this.childrens=Array.from(this.element.children),this.widthList=this.getWidthList(this.element),this.setPosition(),m("height",this.elementHeight,this.element),this.DOWNTOMID=[this.elementHeight,0],this.MIDTOUP=[0,-1*this.elementHeight],this.totalDuration=this.options.duration*this.childrens.length}getContainerOptions(){return{targets:this.element,duration:this.totalDuration,easing:"easeOutCirc",begin:this.joinSyncAnimationGroup,loop:this.options.loop,width:this.widthList}}getWidthList(t){var i=Array.from(t.children).map(t=>t.offsetWidth),e=[];return e.push({value:i[i.length-1],duration:0}),i.forEach(t=>{e.push({value:t,duration:this.options.duration})}),e}setPosition(){this.childrens.forEach(t=>{m({opacity:0,position:"absolute"},t)})}}class v{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize()}initialize(){this.text=e(this.element),e("",this.element),this.instance.splitWord(this.text,!0),this.chars=n(".".concat(this.instance.classes.CHAR),this.element)}}var D,E={fade:x,fadeDown:class extends x{setupAnime(){this.options.loop?d.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({translateY:[-20,0],opacity:[0,1],endDelay:700}).add({translateY:[0,20],opacity:[1,0]}):d({targets:this.element,translateY:[-20,0],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}},fadeUp:class extends x{setupAnime(){this.options.loop?d.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({translateY:[20,0],opacity:[0,1],endDelay:700}).add({translateY:[0,-20],opacity:[1,0]}):d({targets:this.element,translateY:[20,0],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}},fadeLeft:class extends x{setupAnime(){this.options.loop?d.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({translateX:[20,0],opacity:[0,1],endDelay:700}).add({translateX:[0,-20],opacity:[1,0]}):d({targets:this.element,translateX:[20,0],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}},fadeRight:class extends x{setupAnime(){this.options.loop?d.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"linear"}).add({translateX:[-20,0],opacity:[0,1],endDelay:700}).add({translateX:[0,20],opacity:[1,0]}):d({targets:this.element,translateX:[-20,0],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"linear"})}},zoom:class{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=e(this.element),e("",this.element),this.instance.splitWord(this.text)}setupAnime(){this.options.loop?d.timeline({targets:this.element,loop:!0,duration:this.options.duration,easing:"easeInOutQuart"}).add({scale:[0,1],opacity:[0,1],endDelay:700}).add({scale:[1,1.3],opacity:[1,0]}):d({targets:this.element,scale:[0,1],opacity:[0,1],duration:this.options.duration,loop:!1,easing:"easeInOutQuart"})}},bounce:class{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=e(this.element),e("",this.element),this.instance.splitWord(this.text)}setupAnime(){var t={targets:this.element,scale:[.5,1.2,.8,1.2,1],endDelay:700+this.options.duration};d.timeline({duration:this.options.duration,easing:"easeInOutSine",loop:this.options.loop}).add(t)}},swing:class{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=e(this.element),e("",this.element),this.instance.splitWord(this.text),m("transform-origin","top center",this.element)}setupAnime(){var t={targets:this.element,rotateZ:[-5,5,-10,10,0],endDelay:700+this.options.duration};d.timeline({duration:this.options.duration,easing:"easeInOutSine",loop:this.options.loop}).add(t)}},typewrite:class{constructor(t){this.instance=t,this.options=this.instance.options,this.element=this.instance.element,this.initialize(),this.setupAnime()}initialize(){this.text=e(this.element),this.build(),this.textArr=this.text.split(""),this.chunk=Array(this.textArr.length+1).fill(1).map((t,i)=>i),this.chunkReverse=this.chunk.slice().reverse(),this.initTextOptions()}initTextOptions(){this.alt=r(this.options.alt)?this.options.alt:Array.of(this.options.alt),this.totalText=Array.of({textArr:this.textArr,chunk:this.chunk,chunkReverse:this.chunkReverse}),this.alt.forEach(t=>{var i=t.split(""),e=Array(i.length+1).fill(1).map((t,i)=>i),s=e.slice().reverse();this.totalText.push({textArr:i,chunk:e,chunkReverse:s})})}build(){e("",this.element),this.content=document.createElement("span"),i(this.instance.classes.WORD,this.content),e(this.text,this.content),s(this.content,this.element),this.cursor=document.createElement("span"),i(this.instance.classes.CURSOR,this.cursor),e("|",this.cursor),s(this.cursor,this.element)}setupAnime(){var t=0,i={textLen:0},s={textLen:0},n={targets:i,textLen:this.totalText[t].chunk.length-1,round:1,duration:this.options.duration,easing:"easeInOutSine",update:()=>{var s=this.totalText[t].textArr.slice(0,this.totalText[t].chunk[i.textLen]).join("");e("".concat(s),this.content)},complete:()=>{i.textLen=0,t!==this.totalText.length-1||this.options.loop||this.anime.pause()},endDelay:2e3},a={targets:s,textLen:this.totalText[t].chunkReverse.length-1,round:1,duration:this.options.duration/3,easing:"linear",update:()=>{var i=this.totalText[t].textArr.slice(0,this.totalText[t].chunkReverse[s.textLen]).join("");e("".concat(i),this.content)},complete:()=>{s.textLen=0,this.anime.pause(),this.options.loop&&t===this.totalText.length-1&&(t=-1),t<this.totalText.length-1&&(t++,r())}},o=this;function r(){n.textLen=o.totalText[t].chunk.length-1,a.textLen=o.totalText[t].chunkReverse.length-1,o.anime=d.timeline({}).add(n).add(a)}r()}},switchSlider:class extends f{constructor(t){super(t),this.setupAnime()}getAnimeDefaultOptions(t){return{targets:t,easing:"easeInSine",duration:this.options.duration,begin:this.joinSyncAnimationGroup,opacity:[{value:[0,1],duration:.2*this.options.duration},{value:1,duration:.2*this.options.duration},{value:[1,0],duration:.6*this.options.duration}],translateY:[{value:this.DOWNTOMID},{value:0},{value:this.MIDTOUP}]}}setupAnime(){(d(this.getContainerOptions()),this.options.loop)?d(Object.assign({},this.getAnimeDefaultOptions(this.childrens),{loop:!0,delay:(t,i)=>i*this.options.duration})):this.childrens.map((t,i)=>i===this.childrens.length-1?Object.assign(this.getAnimeDefaultOptions(t),{opacity:[[0,1],1],translateY:[{value:this.DOWNTOMID},{value:0}],loop:!1}):Object.assign(this.getAnimeDefaultOptions(t),{loop:!1})).forEach((t,i)=>{setTimeout(()=>d(t),i*this.options.duration)})}},switchFade:class extends f{constructor(t){super(t),this.setupAnime()}getAnimeDefaultOptions(t){return{targets:t,easing:"easeInOutQuart",duration:this.options.duration,begin:this.joinSyncAnimationGroup,opacity:[[0,1],1,[1,0]]}}setupAnime(){(d(this.getContainerOptions()),this.options.loop)?d(Object.assign({},this.getAnimeDefaultOptions(this.childrens),{loop:!0,delay:(t,i)=>i*this.options.duration})):this.childrens.map((t,i)=>i===this.childrens.length-1?Object.assign(this.getAnimeDefaultOptions(t),{opacity:[[0,1],1],loop:!1}):Object.assign(this.getAnimeDefaultOptions(t),{loop:!1})).forEach((t,i)=>{setTimeout(()=>d(t),i*this.options.duration)})}},switchPush:class extends f{constructor(t){super(t),this.setupAnime()}getAnimeDefaultOptions(t){return{targets:t,easing:"easeInBack",duration:this.options.duration,begin:this.joinSyncAnimationGroup,opacity:[{value:[0,1],duration:.2*this.options.duration},{value:1,duration:.4*this.options.duration},{value:[1,0],duration:.4*this.options.duration}],translateY:[{value:this.DOWNTOMID},{value:0},{value:this.MIDTOUP}]}}setupAnime(){(d(this.getContainerOptions()),this.options.loop)?d(Object.assign({},this.getAnimeDefaultOptions(this.childrens),{loop:!0,delay:(t,i)=>i*this.options.duration})):this.childrens.map((t,i)=>i===this.childrens.length-1?Object.assign(this.getAnimeDefaultOptions(t),{opacity:[{value:[0,1],duration:.2*this.options.duration},{value:1,duration:.8*this.options.duration}],translateY:[{value:this.DOWNTOMID},{value:0}],loop:!1}):Object.assign(this.getAnimeDefaultOptions(t),{loop:!1})).forEach((t,i)=>{setTimeout(()=>d(t),i*this.options.duration)})}},charFade:class extends v{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?d.timeline({targets:this.chars,loop:!0,duration:this.options.duration,easing:"easeInOutQuad",delay:(t,i)=>60*i}).add({opacity:[0,1],endDelay:700}).add({opacity:[1,0]}):d({targets:this.chars,opacity:[0,1],easing:"easeInOutQuad",duration:this.options.duration,loop:!1,delay:(t,i)=>60*i})}},charFadeLeft:class extends v{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?d.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,i)=>60*i}).add({translateX:[20,0],easing:"easeOutQuart",opacity:[0,1],endDelay:700}).add({translateX:[0,-20],easing:"easeInQuart",opacity:[1,0]}):d({targets:this.chars,translateX:[20,0],opacity:[0,1],easing:"easeOutQuart",duration:this.options.duration,loop:!1,delay:(t,i)=>60*i})}},charFadeUp:class extends v{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?d.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,i)=>60*i}).add({translateY:["0.7em",0],easing:"easeOutExpo",opacity:[0,1],endDelay:700}).add({translateY:[0,"-0.4em"],easing:"easeInExpo",opacity:[1,0]}):d({targets:this.chars,translateY:["0.7em",0],opacity:[0,1],easing:"easeOutExpo",duration:this.options.duration,loop:!1,delay:(t,i)=>60*i})}},charFadeDown:class extends v{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?d.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,i)=>60*i}).add({translateY:["-0.7em",0],easing:"easeOutExpo",opacity:[0,1],endDelay:700}).add({translateY:[0,"0.4em"],easing:"easeInExpo",opacity:[1,0]}):d({targets:this.chars,translateY:["-0.7em",0],opacity:[0,1],easing:"easeOutExpo",duration:this.options.duration,loop:!1,delay:(t,i)=>60*i})}},charPush:class extends v{constructor(t){super(t),m({overflow:"hidden","vertical-align":"bottom"},this.element),this.setupAnime()}setupAnime(){this.options.loop?d.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,i)=>60*i}).add({translateY:["0.7em",0],opacity:[0,1],endDelay:700}).add({translateY:[0,"-0.5em"],easing:"easeInElastic",opacity:[1,0]}):d({targets:this.chars,translateY:["0.7em",0],opacity:[0,1],duration:this.options.duration,loop:!1,delay:(t,i)=>60*i})}},charRotate:class extends v{constructor(t){super(t),m({overflow:"hidden","vertical-align":"bottom"},this.element),this.chars.forEach(t=>{m("transform-origin","0 100%",t)}),this.setupAnime()}setupAnime(){this.options.loop?d.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,i)=>60*i}).add({rotateZ:[180,0],opacity:[0,1],easing:"easeOutExpo",endDelay:700}).add({rotateZ:[0,-45],opacity:[1,0],easing:"easeInExpo"}):d({targets:this.chars,rotateZ:[180,0],opacity:[0,1],easing:"easeOutExpo",duration:this.options.duration,loop:!1,delay:(t,i)=>60*i})}},charBounceOut:class extends v{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?d.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,i)=>60*i}).add({scale:[0,1],easing:"easeOutElastic",endDelay:700}).add({scale:[1,1.5],easing:"easeInElastic",opacity:[1,0]}):d({targets:this.chars,scale:[0,1],easing:"easeOutElastic",duration:this.options.duration,loop:!1,delay:(t,i)=>60*i})}},charFlip:class extends v{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?d.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,i)=>60*i}).add({rotateY:[-90,0],opacity:[0,1],endDelay:700}).add({rotateY:[0,90],opacity:[1,0]}):d({targets:this.chars,rotateY:[-90,0],opacity:[0,1],duration:this.options.duration,loop:!1,delay:(t,i)=>60*i})}},charZoomIn:class extends v{constructor(t){super(t),this.setupAnime()}setupAnime(){this.options.loop?d.timeline({targets:this.chars,loop:!0,duration:this.options.duration,delay:(t,i)=>60*i}).add({scale:[2,1],opacity:[0,1],easing:"easeOutExpo",endDelay:700}).add({scale:[1,0],easing:"easeInExpo",opacity:[1,0]}):d({targets:this.chars,scale:[2,1],opacity:[0,1],easing:"easeOutExpo",duration:this.options.duration,loop:!1,delay:(t,i)=>60*i})}}},b={},T=h(A)(D=l(y)(D=p()(D=u({mode:"fadeDown",loop:!0,duration:1e3,alt:[]},!0)(D=c("animateText",{methods:["enable","disable","destroy"],dependencies:["anime"]})(D=class extends t{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.setupOptions(e),this.loop=this.options.loop,this.mode=this.options.mode,this.delay=this.options.delay,this.duration=this.options.duration,this.setupClasses(),i(this.classes.NAMESPACE,this.element),this.setupStates(),this.initialize()}initialize(){void 0!==b[this.mode]&&(this.effect=new b[this.mode](this)),this.bind(),this.enter("initialized"),this.trigger(y.READY)}splitWord(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.split(" ").forEach((t,a,o)=>{if(n){t.split("").forEach(t=>{var n=document.createElement("span");e(t,n),i(this.classes.CHAR,n),s(n,this.element)})}else{var r=document.createElement("span");e(t,r),i(this.classes.WORD,r),s(r,this.element)}if(a<o.length-1){var h=document.createElement("span");i(this.classes.SPACE,h),e(" ",h),s(h,this.element)}})}switchWord(){i(this.classes.SWITCH,this.element);var t=document.createElement("span");i(this.classes.WORD,t),e(e(this.element),t),e("",this.element),s(t,this.element),this.alt=r(this.options.alt)?this.options.alt:[].push(this.options.alt),this.alt.forEach(t=>{var n=document.createElement("span");i(this.classes.WORD,n),e(t,n),s(n,this.element)})}bind(){a(this.eventName("click touch"),()=>!1,this.element)}unbind(){o(this.eventName(),this.element)}enable(){this.is("disabled")&&this.leave("disabled"),this.trigger(y.ENABLE)}disable(){this.is("disabled")||this.enter("disabled"),this.trigger(y.DISABLE)}destroy(){this.is("initialized")&&(this.unbind(),this.leave("initialized")),this.trigger(y.DESTROY),super.destroy()}static registerEffect(t,i){b[t]=i}})||D)||D)||D)||D)||D;Object.keys(E).forEach(t=>{T.registerEffect(t,E[t])});export default T;
