/*!
 * @pluginjs/decorator v0.8.3 (https://pluginjs.com)
 * Copyright 2020 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@pluginjs/is"),n=e(require("@pluginjs/global-component")),s=e(require("@pluginjs/factory")),r=require("@pluginjs/utils"),i=require("@pluginjs/dom"),o=require("@pluginjs/events"),a=e(require("@pluginjs/i18n"));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}exports.eventable=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){n.events=e,n.setEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.events=r.deepMerge(n.events,e)},n.prototype.eventName=function(e){if(t.isUndefined(e))return".".concat(this.plugin);t.isArray(e)||(e=e.split(" "));for(var n=e.length,s=0;s<n;s++)e[s]="".concat(e[s],".").concat(this.plugin);return e.join(" ")},n.prototype.eventNameWithId=function(e,n){if(n=n||this.instanceId,t.isUndefined(e))return".".concat(this.plugin,"-").concat(n);t.isArray(e)||(e=e.split(" "));for(var s=e.length,r=0;r<s;r++)e[r]="".concat(e[r],".").concat(this.plugin,"-").concat(n);return e.join(" ")},n.prototype.trigger=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];e instanceof Event?(o.trigger(e,this.element),e=e.type):o.trigger(this.selfEventName(e),this,...s,this.element),e=r.camelize(e);var a="on".concat(e);t.isUndefined(this.options)||t.isUndefined(this.options[a])||!t.isFunction(this.options[a])||this.options[a].apply(this,s)},n.prototype.selfEventName=function(e){t.isArray(e)||(e=e.split(" "));for(var n=e.length,s=0;s<n;s++)e[s]="".concat(this.plugin,":").concat(e[s]);return e.join(" ")}}},exports.globalRegister=function(e){return function(t){s[e]=t}},exports.optionable=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){n.defaults=e,n.setDefaults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.defaults=r.deepMerge(n.defaults,e)},t?(n.prototype.setupOptions=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.options=r.deepMerge(n.defaults,...t,this.getDataOptions())},n.prototype.getDataOptions=function(){return this.element?r.parseDataOptions(this.element.dataset):{}}):n.prototype.setupOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=r.deepMerge(n.defaults,e)}}},exports.register=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var{methods:c=[],dependencies:l={}}=o,f=u(o,["methods","dependencies"]);s.register(e,Object.assign(a,p({methods:a.methods?r.deepMerge(a.methods,c):c,dependencies:a.dependencies?r.deepMerge(a.dependencies,l):l},f)));var h=[];if(a.prototype.plugin=e,a.getInstances=()=>h,a.addInstance=t=>{a.prototype instanceof n||i.setData(e,t,t.element),t.instanceId=r.getUID(t.plugin),h.push(t)},a.removeInstance=t=>{a.prototype instanceof n||i.removeData(e,t.element),h=h.filter(e=>e!==t)},a.findInstanceByElement=e=>h.find(t=>t.element===e),a.prototype.resize&&void 0===a.resize&&(a.resize=function(e,t){for(var n=0;n<h.length;n++)h[n].resize(e,t)}),t.isFunction(a.resize)&&s.emitter.on("resize",(e,t,n)=>{a.resize(t,n)}),a.prototype instanceof n)s[e]=a;else{var g=e=>"string"==typeof e?Array.from(document.querySelectorAll(e)):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):e instanceof Node?Array.of(e):t.isArray(e)?e:[];s[e]=function(n,s){for(var r=arguments.length,o=new Array(r>2?r-2:0),c=2;c<r;c++)o[c-2]=arguments[c];var l=g(n);if(!l.length)throw new Error("Element is not exists.");var p=[];if(t.isString(s)){if(!a.methods.includes(s))throw new Error('Method "'.concat(s,'" is not exists on "').concat(e,'".'));p=l.map(t=>{var n=i.getData(e,t);return n instanceof a?n[s](...o):null})}else p=l.map(e=>a.of(e,s));return 1===p.length?p[0]:p},Object.setPrototypeOf(s[e],a)}return a}},exports.stateable=function(){return function(e){e.prototype.setupStates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._states=e},e.prototype.is=function(e){return!!(this._states[e]&&this._states[e]>0)},e.prototype.enter=function(e){void 0===this._states[e]&&(this._states[e]=0),this._states[e]=1},e.prototype.leave=function(e){void 0===this._states[e]&&(this._states[e]=0),this._states[e]=0}}},exports.styleable=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){n.classes=e,n.setClasses=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.classes=r.deepMerge(n.classes,e)},n.prototype.getClass=function(e,t,n){return void 0!==t?this.getClass(e.replace("{".concat(t,"}"),n)):e.replace("{namespace}",this.classes.NAMESPACE||"")},n.prototype.getClasses=function(e,n,s){if(t.isString(s)&&void 0!==e&&void 0!==n){s=s.split(" ");for(var r=0;r<s.length;r++)s[r]=this.getClass(e,n,s[r]);return s.join(" ")}return""},n.prototype.setupClasses=function(e){var s={};if(void 0!==this.options&&t.isObject(this.options.classes)&&(s=this.options.classes),this.classes=r.deepMerge({},n.classes,e,function e(n){var s={};for(var r in n)Object.hasOwnProperty.call(n,r)&&(t.isString(n[r])?s[r.toUpperCase()]=n[r]:t.isObject(n[r])&&(s[r.toUpperCase()]=e(n[r])));return s}(s)),void 0!==this.classes.NAMESPACE){var i=e=>{for(var n in e)Object.hasOwnProperty.call(e,n)&&(t.isString(e[n])?e[n]=this.getClass(e[n]):t.isObject(e[n])&&(e[n]=i(e[n])));return e};this.classes=i(this.classes)}}}},exports.themeable=function(){return function(e){e.prototype.getThemeClass=function(e,n){if(void 0===e&&void 0!==this.options&&t.isString(this.options.theme))return this.getThemeClass(this.options.theme);if(t.isString(e)){if(void 0===n&&void 0!==this.classes&&(n=this.classes.THEME),e=e.split(" "),n)for(var s=0;s<e.length;s++)e[s]=n.replace("{theme}",e[s]);else for(var r=0;r<e.length;r++)e[r]=this.getClass(e[r]);return e.join(" ")}return""}}},exports.translateable=function(e){return function(t){t.I18N=new a({locale:t.defaults.locale,fallbacks:t.defaults.localeFallbacks},e),Object.assign(t.prototype,{setupI18n(){this.i18n=t.I18N.instance({locale:this.options.locale,fallbacks:this.options.localeFallbacks})},translate(e,t){return this.i18n.translate(e,t)},setLocale(e){return this.i18n.setLocale(e)},getLocale(){return this.i18n.getLocale()}})}};
