/*!
 * @pluginjs/events v0.8.3 (https://pluginjs.com)
 * Copyright 2020 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@pluginjs/is"),r=require("@pluginjs/utils"),n=(e=require("@pluginjs/emitter"))&&"object"==typeof e&&"default"in e?e.default:e;class i extends n{constructor(e){super(),this.element=e,this.element._eventEmitter=this}static getEventEmitter(e){return e._eventEmitter||(e._eventEmitter=new this(e)),e._eventEmitter}}var a=e=>"object"==typeof e&&"addEventListener"in e,s=e=>{var t=void 0===e.namespace?e.type:"".concat(e.type,".").concat(e.namespace),r=i.getEventEmitter(e.currentTarget);e.detail?r.emit(t,e,e.detail):r.emit(t,e)},o=(e,r,n,a,o)=>{var l=i.getEventEmitter(a),{eventName:v}=i.parseEvent(e);l.hasListeners(e)||a.addEventListener(v,s,!1);var c=((e,r,n,i)=>(e,a)=>{var s,o=e.target,l=e.currentTarget||i,v=a?[e].concat(a):[e];if(t.isString(r))for(;o&&o!==l;)o.matches(r)&&(s=n.apply(o,v)),o=o.parentNode;else s=n.apply(l,v);!1===s&&(e.preventDefault(),e.stopPropagation())})(0,r,n,a);n._delegator=c,o?l.once(e,c):l.on(e,c)},l=r.curryWith((e,r,n,a)=>{var o=e.split(" ");if(o.length>1)o.forEach(e=>{l(e,r,n,a)});else{t.isString(r)||t.isFunction(n)||(a=n,n=r,r=void 0),t.isFunction(n)||(a=n,n=void 0);var v=e,c=i.getEventEmitter(a),{eventName:p}=i.parseEvent(v);c.hasListeners(v)&&(0===c.getListeners(v).length&&a.removeEventListener(p,s),void 0===n?c.off(v):c.off(v,n._delegator))}return a},a),v=r.curryWith((e,r,n,i)=>{var a=e.split(" "),s=t.isString(r)?r.split(","):null;switch(!0){case Boolean(a.length>1):a.forEach(e=>{v(e,r,n,i)});break;case Boolean(s&&s.length>1):s.forEach(t=>{v(e,t.trim(),n,i)});break;default:t.isString(r)||t.isFunction(n)||(i=n,n=r,r=void 0),o(e,r,n,i)}return i},a),c=r.curryWith((e,r,n,i)=>{var a=e.split(" "),s=t.isString(r)?r.split(","):null;switch(!0){case Boolean(a.length>1):a.forEach(e=>{c(e,r,n,i)});break;case Boolean(s&&s.length>1):s.forEach(t=>{c(e,t.trim(),n,i)});break;default:t.isString(r)||t.isFunction(n)||(i=n,n=r,r=void 0);var v=e=>(l(a[0],r,v,i),n(e));o(a[0],r,v,i,!0)}return i},a),p=v,u=l,g=c;exports.bindEvent=v,exports.bindEventOnce=c,exports.getEventEmitter=e=>i.getEventEmitter(e),exports.off=u,exports.on=p,exports.once=g,exports.removeEvent=l,exports.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s=r[r.length-1];if(a(s))if(e instanceof window.Event)s.dispatchEvent(e);else{var o=r.length>1?r.slice(0,r.length-1):null,{eventName:l,namespace:v}=i.parseEvent(e),c=new CustomEvent(l,{cancelable:!0,bubbles:!0,detail:o});v&&(c.namespace=v),s.dispatchEvent(c)}};
