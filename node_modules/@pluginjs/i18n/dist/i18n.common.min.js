/*!
 * @pluginjs/i18n v0.8.3 (https://pluginjs.com)
 * Copyright 2020 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
"use strict";var t,a=require("@pluginjs/utils"),e=(t=require("@pluginjs/template"))&&"object"==typeof t&&"default"in t?t.default:t;class n{constructor(t,e){this.defaults=a.deepMerge(n.defaults,t),this.translations=e||{}}hasTranslation(t){return t in this.translations}addTranslation(t,a){this.translations[t]?Object.assign(this.translations[t],a):this.translations[t]=a}getTranslation(t){return this.translations[t]?this.translations[t]:{}}instance(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,s=a.deepMerge(n.defaults,t),l=s.locale;function r(t,e){var s=n.getTranslation(e);return a.getValueByPath(s,t)}return{translate(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,o=r(t,i);if(void 0===o&&s.fallbacks){var c=i.split("-");if(c.length>1&&n.hasTranslation(c[0])&&(o=r(t,c[0])),void 0===o)o=r(t,!0!==s.fallbacks&&n.hasTranslation(s.fallbacks)?s.fallbacks:n.defaults.locale)}if("[object Array]"===Object.prototype.toString.call(o)&&o.length>=2&&"string"==typeof a._number&&void 0!==a[a._number]){var u=parseInt(a[a._number],10);1===u?o=o[0]:u>1?o=o[1]:0===u&&o.length>=3&&(o=o[2])}if("string"==typeof o){var h,d=e.parse(o);if(!d)return o;for(var g=0;g<d.length;g++)void 0===a[h=d[g]]?a[h]=s.missingPlaceholder(h):null===a[h]&&(a[h]=s.nullPlaceholder(h));return e.render(o,a)}return Object(o)===o?o:'[missing "'.concat(i,".").concat(t,'" translation]')},setLocale(t){l=t},getLocale:()=>l}}setTranslations(t){this.translations=t}}n.defaults={locale:"en",fallbacks:!0,nullPlaceholder:t=>"[missing {{".concat(t,"}} value]"),missingPlaceholder:t=>"[missing {{".concat(t,"}} value]")},module.exports=n;
